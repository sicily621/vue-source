{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/observer/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["//工具方法\r\nexport function isObject(data){\r\n    return typeof data === 'object' && data !== null;\r\n}","import {isObject} from '../utils';\r\n\r\nclass Observer{\r\n    constructor(data){\r\n        this.walk(data)\r\n    }\r\n    walk(data){\r\n        //对象的循环Object.keys().forEach for in 有原型\r\n        Object.keys(data).forEach(key => {\r\n            defineReactive(data,key,data[key]);\r\n        })\r\n    }\r\n}\r\n//vue2 性能 递归 重写get 和 set vue3 proxy\r\nfunction defineReactive(data,key,value){\r\n    observe(value)\r\n    Object.defineProperty(data,key,{\r\n        get(){\r\n            return value;\r\n        },\r\n        set(newValue){\r\n            if(newValue === value) return;\r\n            observe(newValue)\r\n            value = newValue;\r\n        }\r\n    })\r\n}\r\n\r\nexport function observe(data){\r\n    //对象就是使用Object.defineProperty来实现响应式原理\r\n\r\n    //判断是不是对象，如果是null那就不用监控了\r\n    if (!isObject(data)) {\r\n        return;\r\n    }\r\n    //对数据进行defineProperty\r\n    // 判断是否被观测过通过实例\r\n    return new Observer(data)//可以看到当前数据是否被观测过\r\n\r\n}","import {observe} from './observer/index.js'\r\nexport function initState(vm){\r\n    const opts = vm.$options;\r\n    if(opts.props){\r\n        initProps(vm);\r\n    }\r\n    if(opts.methods){\r\n        initMethods(vm);\r\n    }\r\n    if(opts.data){\r\n        initData(vm)\r\n    }\r\n}\r\nfunction initProps () {\r\n\r\n}\r\nfunction initMethods () {\r\n\r\n}\r\nfunction initData (vm) {\r\n    //数据响应式原理\r\n    let data = vm.$options.data;\r\n    data = vm._data =  typeof data === 'function' ? data.call(vm) : data ;\r\n    \r\n    //观测数据\r\n    observe(data);\r\n}","import { initState } from './state';\r\nexport function initMixin(Vue){\r\n    Vue.prototype._init = function(options){\r\n        const vm = this;\r\n        vm.$options = options;\r\n\r\n\r\n        initState(vm)//初始化状态\r\n    }\r\n}","import {initMixin} from './init';\r\nfunction Vue(options){\r\n    this._init(options);//初始化\r\n\r\n}\r\ninitMixin(Vue);\r\n\r\n\r\nexport default Vue;"],"names":["isObject","data","Observer","walk","Object","keys","forEach","key","defineReactive","value","observe","defineProperty","get","set","newValue","initState","vm","opts","$options","props","methods","initData","_data","call","initMixin","Vue","prototype","_init","options"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAA;EACO,SAASA,QAAT,CAAkBC,IAAlB,EAAuB;EAC1B,SAAO,QAAOA,IAAP,MAAgB,QAAhB,IAA4BA,IAAI,KAAK,IAA5C;EACH;;MCDKC;EACF,oBAAYD,IAAZ,EAAiB;EAAA;;EACb,SAAKE,IAAL,CAAUF,IAAV;EACH;;;;2BACIA,MAAK;EACN;EACAG,MAAAA,MAAM,CAACC,IAAP,CAAYJ,IAAZ,EAAkBK,OAAlB,CAA0B,UAAAC,GAAG,EAAI;EAC7BC,QAAAA,cAAc,CAACP,IAAD,EAAMM,GAAN,EAAUN,IAAI,CAACM,GAAD,CAAd,CAAd;EACH,OAFD;EAGH;;;;;;;EAGL,SAASC,cAAT,CAAwBP,IAAxB,EAA6BM,GAA7B,EAAiCE,KAAjC,EAAuC;EACnCC,EAAAA,OAAO,CAACD,KAAD,CAAP;EACAL,EAAAA,MAAM,CAACO,cAAP,CAAsBV,IAAtB,EAA2BM,GAA3B,EAA+B;EAC3BK,IAAAA,GAD2B,iBACtB;EACD,aAAOH,KAAP;EACH,KAH0B;EAI3BI,IAAAA,GAJ2B,eAIvBC,QAJuB,EAId;EACT,UAAGA,QAAQ,KAAKL,KAAhB,EAAuB;EACvBC,MAAAA,OAAO,CAACI,QAAD,CAAP;EACAL,MAAAA,KAAK,GAAGK,QAAR;EACH;EAR0B,GAA/B;EAUH;;EAEM,SAASJ,OAAT,CAAiBT,IAAjB,EAAsB;EACzB;EAEA;EACA,MAAI,CAACD,QAAQ,CAACC,IAAD,CAAb,EAAqB;EACjB;EACH,GANwB;EAQzB;;;EACA,SAAO,IAAIC,QAAJ,CAAaD,IAAb,CAAP,CATyB;EAW5B;;ECtCM,SAASc,SAAT,CAAmBC,EAAnB,EAAsB;EACzB,MAAMC,IAAI,GAAGD,EAAE,CAACE,QAAhB;;EACA,MAAGD,IAAI,CAACE,KAAR,EAAc;;EAGd,MAAGF,IAAI,CAACG,OAAR,EAAgB;;EAGhB,MAAGH,IAAI,CAAChB,IAAR,EAAa;EACToB,IAAAA,QAAQ,CAACL,EAAD,CAAR;EACH;EACJ;;EAOD,SAASK,QAAT,CAAmBL,EAAnB,EAAuB;EACnB;EACA,MAAIf,IAAI,GAAGe,EAAE,CAACE,QAAH,CAAYjB,IAAvB;EACAA,EAAAA,IAAI,GAAGe,EAAE,CAACM,KAAH,GAAY,OAAOrB,IAAP,KAAgB,UAAhB,GAA6BA,IAAI,CAACsB,IAAL,CAAUP,EAAV,CAA7B,GAA6Cf,IAAhE,CAHmB;;EAMnBS,EAAAA,OAAO,CAACT,IAAD,CAAP;EACH;;ECzBM,SAASuB,SAAT,CAAmBC,GAAnB,EAAuB;EAC1BA,EAAAA,GAAG,CAACC,SAAJ,CAAcC,KAAd,GAAsB,UAASC,OAAT,EAAiB;EACnC,QAAMZ,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAACE,QAAH,GAAcU,OAAd;EAGAb,IAAAA,SAAS,CAACC,EAAD,CAAT,CALmC;EAMtC,GAND;EAOH;;ECRD,SAASS,GAAT,CAAaG,OAAb,EAAqB;EACjB,OAAKD,KAAL,CAAWC,OAAX,EADiB;;EAGpB;;EACDJ,SAAS,CAACC,GAAD,CAAT;;;;;;;;"}